{"paragraphs":[{"text":"%spark.dep\nz.reset()\nz.load(\"org.nd4j:nd4j-native-platform:0.9.1\")\nz.load(\"org.deeplearning4j:deeplearning4j-core:0.9.1\")\nz.load(\"org.datavec:datavec-spark_2.11:0.9.1_spark_2\")\nz.load(\"org.deeplearning4j:dl4j-spark_2.11:0.9.1_spark_2\")\nz.load(\"org.deeplearning4j:deeplearning4j-zoo:0.9.1\")","dateUpdated":"2019-09-02T03:05:54+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"res0: org.apache.zeppelin.dep.Dependency = org.apache.zeppelin.dep.Dependency@a30e89\n"}]},"apps":[],"jobName":"paragraph_1567393482799_-1929974288","id":"20190813-010616_2021083357","dateCreated":"2019-09-02T03:04:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:5183","user":"anonymous","dateFinished":"2019-09-02T03:06:02+0000","dateStarted":"2019-09-02T03:05:54+0000"},{"text":"import scala.collection.JavaConversions._\n\nimport org.deeplearning4j.datasets.iterator._\nimport org.deeplearning4j.datasets.iterator.impl._\nimport org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer\nimport org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster\nimport org.deeplearning4j.optimize.listeners._\nimport org.deeplearning4j.datasets.datavec.RecordReaderMultiDataSetIterator\nimport org.deeplearning4j.eval.Evaluation\nimport org.apache.spark.SparkConf\nimport org.deeplearning4j.zoo.model.LeNet\nimport org.apache.spark.api.java.JavaRDD\nimport org.apache.spark.api.java.JavaSparkContext\nimport org.deeplearning4j.spark.api.TrainingMaster\nimport org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster\nimport org.nd4j.linalg.activations.Activation\nimport org.nd4j.linalg.dataset.DataSet\nimport org.nd4j.linalg.dataset.api.iterator.DataSetIterator\nimport org.nd4j.linalg.lossfunctions.LossFunctions\nimport org.datavec.image.loader.CifarLoader\nimport org.deeplearning4j.datasets.iterator.impl.CifarDataSetIterator","dateUpdated":"2019-09-02T03:07:08+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import scala.collection.JavaConversions._\nimport org.deeplearning4j.datasets.iterator._\nimport org.deeplearning4j.datasets.iterator.impl._\nimport org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer\nimport org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster\nimport org.deeplearning4j.optimize.listeners._\nimport org.deeplearning4j.datasets.datavec.RecordReaderMultiDataSetIterator\nimport org.deeplearning4j.eval.Evaluation\nimport org.apache.spark.SparkConf\nimport org.deeplearning4j.zoo.model.LeNet\nimport org.apache.spark.api.java.JavaRDD\nimport org.apache.spark.api.java.JavaSparkContext\nimport org.deeplearning4j.spark.api.TrainingMaster\nimport org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster\nimport org.nd4j.linalg.activations.Activation\nimport org.nd4j.linalg.dataset.DataSet\nimport org.nd4j.linalg.dataset.api.iterator.DataSetIterator\nimport org.nd4j.linalg.lossfunctions.LossFunctions\nimport org.datavec.image.loader.CifarLoader\nimport org.deeplearning4j.datasets.iterator.impl.CifarDataSetIterator\n"}]},"apps":[],"jobName":"paragraph_1567393482799_-1929974288","id":"20190813-010626_1430679682","dateCreated":"2019-09-02T03:04:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5184","user":"anonymous","dateFinished":"2019-09-02T03:07:12+0000","dateStarted":"2019-09-02T03:07:08+0000"},{"text":"val numberOfLabels = CifarLoader.NUM_LABELS\nval numberOfSamples = CifarLoader.NUM_TRAIN_IMAGES\nval numberOfTestSamples = CifarLoader.NUM_TEST_IMAGES\nval batchSizePerWorker = 16","dateUpdated":"2019-09-02T03:06:06+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"numberOfLabels: Int = 10\nnumberOfSamples: Int = 50000\nnumberOfTestSamples: Int = 10000\nbatchSizePerWorker: Int = 16\n"}]},"apps":[],"jobName":"paragraph_1567393482799_-1929974288","id":"20190828-044726_487790819","dateCreated":"2019-09-02T03:04:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5185","user":"anonymous","dateFinished":"2019-09-02T03:06:17+0000","dateStarted":"2019-09-02T03:06:06+0000"},{"text":"import org.datavec.image.loader.BaseImageLoader\nimport collection.JavaConverters._\nimport java.io.File\n\nval states = Map(\"filesFilename\" -> \"cifar-10-binary.tar.gz\", \"filesURL\" -> \"https://storage.googleapis.com/ufrgsneuwald/~kriz/cifar-10-binary.tar.gz\", \"filesFilenameUnzipped\" -> \"cifar-10-batches-bin\")\n\nBaseImageLoader.downloadAndUntar(states, new File(new File(System.getProperty(\"user.home\")), \"cifar\"))","dateUpdated":"2019-09-02T03:06:24+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import org.datavec.image.loader.BaseImageLoader\nimport collection.JavaConverters._\nimport java.io.File\nstates: scala.collection.immutable.Map[String,String] = Map(filesFilename -> cifar-10-binary.tar.gz, filesURL -> https://storage.googleapis.com/ufrgsneuwald/~kriz/cifar-10-binary.tar.gz, filesFilenameUnzipped -> cifar-10-batches-bin)\n"}]},"apps":[],"jobName":"paragraph_1567393482799_-1929974288","id":"20190828-053243_1540319826","dateCreated":"2019-09-02T03:04:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5186","user":"anonymous","dateFinished":"2019-09-02T03:06:31+0000","dateStarted":"2019-09-02T03:06:24+0000"},{"text":"val trainingDataSet = new CifarDataSetIterator(batchSizePerWorker, numberOfSamples, true)\nval testDataSet = new CifarDataSetIterator(batchSizePerWorker, numberOfTestSamples, false)\nimport scala.collection.mutable.ListBuffer\n\nvar trainDataList = new ListBuffer[DataSet]()\nwhile (trainingDataSet.hasNext()) {\n  trainDataList += trainingDataSet.next()\n}\n\nval testDataList = new ListBuffer[DataSet]()\nwhile (testDataSet.hasNext()) {\n  testDataList += testDataSet.next()\n}\nval trainData = sc.parallelize(trainDataList)\nval testData = sc.parallelize(testDataList)","dateUpdated":"2019-09-02T03:06:29+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"trainingDataSet: org.deeplearning4j.datasets.iterator.impl.CifarDataSetIterator = org.deeplearning4j.datasets.iterator.impl.CifarDataSetIterator@41adf929\ntestDataSet: org.deeplearning4j.datasets.iterator.impl.CifarDataSetIterator = org.deeplearning4j.datasets.iterator.impl.CifarDataSetIterator@6994e710\nimport scala.collection.mutable.ListBuffer\ntrainDataList: scala.collection.mutable.ListBuffer[org.nd4j.linalg.dataset.DataSet] = ListBuffer()\ntestDataList: scala.collection.mutable.ListBuffer[org.nd4j.linalg.dataset.DataSet] = ListBuffer()\ntrainData: org.apache.spark.rdd.RDD[org.nd4j.linalg.dataset.DataSet] = ParallelCollectionRDD[0] at parallelize at <console>:62\ntestData: org.apache.spark.rdd.RDD[org.nd4j.linalg.dataset.DataSet] = ParallelCollectionRDD[1] at parallelize at <console>:62\n"}]},"apps":[],"jobName":"paragraph_1567393482799_-1929974288","id":"20190828-044805_1310907596","dateCreated":"2019-09-02T03:04:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5187","user":"anonymous","dateFinished":"2019-09-02T03:06:48+0000","dateStarted":"2019-09-02T03:06:29+0000"},{"text":"val seed = 12345\nval zooModel = new LeNet(numberOfLabels, seed, 3)","dateUpdated":"2019-09-02T03:07:12+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"seed: Int = 12345\nzooModel: org.deeplearning4j.zoo.model.LeNet = org.deeplearning4j.zoo.model.LeNet@6eb3e381\n"}]},"apps":[],"jobName":"paragraph_1567393482800_-1919586068","id":"20190813-014219_2027485131","dateCreated":"2019-09-02T03:04:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5188","user":"anonymous","dateFinished":"2019-09-02T03:07:13+0000","dateStarted":"2019-09-02T03:07:12+0000"},{"text":"import collection.JavaConverters._\nzooModel.setInputShape(Array(Array(3, 32, 32)))","dateUpdated":"2019-09-02T03:07:16+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import collection.JavaConverters._\n"}]},"apps":[],"jobName":"paragraph_1567393482800_-1919586068","id":"20190828-024936_683229252","dateCreated":"2019-09-02T03:04:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5189","user":"anonymous","dateFinished":"2019-09-02T03:07:17+0000","dateStarted":"2019-09-02T03:07:16+0000"},{"text":"val tm = new ParameterAveragingTrainingMaster.Builder(batchSizePerWorker)\n  .workerPrefetchNumBatches(0)\n  .saveUpdater(true)\n  .averagingFrequency(5)\n  .batchSizePerWorker(batchSizePerWorker)\n  .build()\n  \nval sparkNet = new SparkDl4jMultiLayer(sc, zooModel.conf(), tm)","dateUpdated":"2019-09-02T03:07:36+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"tm: org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster = ParameterAveragingTrainingMaster(saveUpdater=true, numWorkers=null, rddDataSetNumExamples=16, averagingFrequency=5, aggregationDepth=2, prefetchNumBatches=0, iterationCount=0, trainingHookList=null)\nsparkNet: org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer = org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer@6d3bfcf3\n"}]},"apps":[],"jobName":"paragraph_1567393482800_-1919586068","id":"20190819-011525_331240530","dateCreated":"2019-09-02T03:04:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5190","user":"anonymous","dateFinished":"2019-09-02T03:07:47+0000","dateStarted":"2019-09-02T03:07:36+0000"},{"text":"val numEpochs = 9\nfor (i <- 0 to numEpochs) {\n  val trained = sparkNet.fit(trainData)\n}","dateUpdated":"2019-09-02T03:07:44+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"numEpochs: Int = 9\n"}]},"apps":[],"jobName":"paragraph_1567393482800_-1919586068","id":"20190813-015330_1330142053","dateCreated":"2019-09-02T03:04:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5191","user":"anonymous","dateFinished":"2019-09-02T05:18:06+0000","dateStarted":"2019-09-02T03:07:44+0000"},{"text":"val resultado = sparkNet.doEvaluation(testData, 64, new Evaluation(10))(0)\nprintln(resultado)","dateUpdated":"2019-09-02T03:08:04+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1567393482800_-1919586068","id":"20190813-021401_2110373941","dateCreated":"2019-09-02T03:04:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5192","user":"anonymous","dateFinished":"2019-09-02T05:18:10+0000","dateStarted":"2019-09-02T03:08:04+0000","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"resultado: org.deeplearning4j.eval.Evaluation =\n\nExamples labeled as 0 classified by model as 0: 834 times\nExamples labeled as 0 classified by model as 1: 2 times\nExamples labeled as 0 classified by model as 2: 105 times\nExamples labeled as 0 classified by model as 3: 27 times\nExamples labeled as 0 classified by model as 4: 5 times\nExamples labeled as 0 classified by model as 5: 1 times\nExamples labeled as 0 classified by model as 6: 3 times\nExamples labeled as 0 classified by model as 7: 1 times\nExamples labeled as 0 classified by model as 8: 12 times\nExamples labeled as 0 classified by model as 9: 10 times\nExamples labeled as 1 classified by model as 1: 989 times\nExamples labeled as 1 classified by model as 2: 8 times\nExamples labeled as 1 classified by model as 5: 1 times\nExamples la...\nExamples labeled as 0 classified by model as 0: 834 times\nExamples labeled as 0 classified by model as 1: 2 times\nExamples labeled as 0 classified by model as 2: 105 times\nExamples labeled as 0 classified by model as 3: 27 times\nExamples labeled as 0 classified by model as 4: 5 times\nExamples labeled as 0 classified by model as 5: 1 times\nExamples labeled as 0 classified by model as 6: 3 times\nExamples labeled as 0 classified by model as 7: 1 times\nExamples labeled as 0 classified by model as 8: 12 times\nExamples labeled as 0 classified by model as 9: 10 times\nExamples labeled as 1 classified by model as 1: 989 times\nExamples labeled as 1 classified by model as 2: 8 times\nExamples labeled as 1 classified by model as 5: 1 times\nExamples labeled as 1 classified by model as 7: 1 times\nExamples labeled as 1 classified by model as 9: 1 times\nExamples labeled as 2 classified by model as 0: 5 times\nExamples labeled as 2 classified by model as 2: 986 times\nExamples labeled as 2 classified by model as 3: 3 times\nExamples labeled as 2 classified by model as 4: 2 times\nExamples labeled as 2 classified by model as 5: 1 times\nExamples labeled as 2 classified by model as 6: 2 times\nExamples labeled as 2 classified by model as 7: 1 times\nExamples labeled as 3 classified by model as 2: 23 times\nExamples labeled as 3 classified by model as 3: 963 times\nExamples labeled as 3 classified by model as 4: 6 times\nExamples labeled as 3 classified by model as 5: 2 times\nExamples labeled as 3 classified by model as 6: 4 times\nExamples labeled as 3 classified by model as 7: 2 times\nExamples labeled as 4 classified by model as 2: 63 times\nExamples labeled as 4 classified by model as 3: 11 times\nExamples labeled as 4 classified by model as 4: 913 times\nExamples labeled as 4 classified by model as 5: 3 times\nExamples labeled as 4 classified by model as 6: 9 times\nExamples labeled as 4 classified by model as 8: 1 times\nExamples labeled as 5 classified by model as 2: 59 times\nExamples labeled as 5 classified by model as 3: 35 times\nExamples labeled as 5 classified by model as 4: 7 times\nExamples labeled as 5 classified by model as 5: 889 times\nExamples labeled as 5 classified by model as 6: 6 times\nExamples labeled as 5 classified by model as 7: 3 times\nExamples labeled as 5 classified by model as 9: 1 times\nExamples labeled as 6 classified by model as 2: 26 times\nExamples labeled as 6 classified by model as 3: 8 times\nExamples labeled as 6 classified by model as 4: 6 times\nExamples labeled as 6 classified by model as 5: 1 times\nExamples labeled as 6 classified by model as 6: 959 times\nExamples labeled as 7 classified by model as 0: 1 times\nExamples labeled as 7 classified by model as 2: 36 times\nExamples labeled as 7 classified by model as 3: 10 times\nExamples labeled as 7 classified by model as 4: 13 times\nExamples labeled as 7 classified by model as 5: 4 times\nExamples labeled as 7 classified by model as 7: 935 times\nExamples labeled as 7 classified by model as 9: 1 times\nExamples labeled as 8 classified by model as 0: 6 times\nExamples labeled as 8 classified by model as 1: 3 times\nExamples labeled as 8 classified by model as 2: 29 times\nExamples labeled as 8 classified by model as 3: 16 times\nExamples labeled as 8 classified by model as 4: 2 times\nExamples labeled as 8 classified by model as 5: 1 times\nExamples labeled as 8 classified by model as 8: 942 times\nExamples labeled as 8 classified by model as 9: 1 times\nExamples labeled as 9 classified by model as 0: 2 times\nExamples labeled as 9 classified by model as 1: 4 times\nExamples labeled as 9 classified by model as 2: 13 times\nExamples labeled as 9 classified by model as 3: 9 times\nExamples labeled as 9 classified by model as 4: 3 times\nExamples labeled as 9 classified by model as 5: 1 times\nExamples labeled as 9 classified by model as 6: 1 times\nExamples labeled as 9 classified by model as 7: 1 times\nExamples labeled as 9 classified by model as 8: 8 times\nExamples labeled as 9 classified by model as 9: 958 times\n\n\n==========================Scores========================================\n # of classes:    10\n Accuracy:        0.9368\n Precision:       0.9462\n Recall:          0.9368\n F1 Score:        0.9384\nPrecision, recall & F1: macro-averaged (equally weighted avg. of 10 classes)\n========================================================================\n"}]}},{"dateUpdated":"2019-09-02T03:04:42+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1567393482801_-1919970817","id":"20190828-032119_912714771","dateCreated":"2019-09-02T03:04:42+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5194"}],"name":"LeNet - Cifar10","id":"2EPB23SW5","angularObjects":{"2EM3WKXAM:shared_process":[],"2EMWRQYS7:shared_process":[],"2EKTHJC8T:shared_process":[],"2EMA7BYMF:shared_process":[],"2ENE92MW6:shared_process":[],"2EN5ZQ6WQ:shared_process":[],"2EJWU1N86:shared_process":[],"2EM4A3851:shared_process":[],"2EM259R36:shared_process":[],"2EK3NYJMG:shared_process":[],"2EKY6FKRK:shared_process":[],"2EPPCUETP:shared_process":[],"2EMCCYMJY:shared_process":[],"2EPCG5579:shared_process":[],"2ENJPP7ZA:shared_process":[],"2EMTG9HCH:shared_process":[],"2EP5KXPUR:shared_process":[],"2EMJJNC3G:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}
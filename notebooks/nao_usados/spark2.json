{"paragraphs":[{"text":"%spark.dep\nz.reset()\nz.load(\"org.nd4j:nd4j-native-platform:0.9.1\")\nz.load(\"org.deeplearning4j:deeplearning4j-core:0.9.1\")\nz.load(\"org.datavec:datavec-spark_2.11:0.9.1_spark_2\")\nz.load(\"org.deeplearning4j:dl4j-spark_2.11:0.9.1_spark_2\")","user":"anonymous","dateUpdated":"2019-08-13T02:53:28+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"res0: org.apache.zeppelin.dep.Dependency = org.apache.zeppelin.dep.Dependency@731628f8\n"}]},"apps":[],"jobName":"paragraph_1565664735082_-906065161","id":"20190813-025215_141268390","dateCreated":"2019-08-13T02:52:15+0000","dateStarted":"2019-08-13T02:53:28+0000","dateFinished":"2019-08-13T02:53:51+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:11282"},{"text":"import org.apache.spark.SparkConf\nimport org.apache.spark.api.java.JavaRDD\nimport org.apache.spark.api.java.JavaSparkContext\nimport org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator\nimport org.deeplearning4j.eval.Evaluation\nimport org.deeplearning4j.nn.api.OptimizationAlgorithm\nimport org.deeplearning4j.nn.conf.MultiLayerConfiguration\nimport org.deeplearning4j.nn.conf.NeuralNetConfiguration\nimport org.deeplearning4j.nn.conf.Updater\nimport org.deeplearning4j.nn.conf.layers.DenseLayer\nimport org.deeplearning4j.nn.conf.layers.OutputLayer\nimport org.deeplearning4j.nn.weights.WeightInit\nimport org.deeplearning4j.spark.api.TrainingMaster\nimport org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer\nimport org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster\nimport org.nd4j.linalg.activations.Activation\nimport org.nd4j.linalg.dataset.DataSet\nimport org.nd4j.linalg.dataset.api.iterator.DataSetIterator\nimport org.nd4j.linalg.lossfunctions.LossFunctions\nimport org.slf4j.Logger\nimport org.slf4j.LoggerFactory","user":"anonymous","dateUpdated":"2019-08-13T02:59:29+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import org.apache.spark.SparkConf\nimport org.apache.spark.api.java.JavaRDD\nimport org.apache.spark.api.java.JavaSparkContext\nimport org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator\nimport org.deeplearning4j.eval.Evaluation\nimport org.deeplearning4j.nn.api.OptimizationAlgorithm\nimport org.deeplearning4j.nn.conf.MultiLayerConfiguration\nimport org.deeplearning4j.nn.conf.NeuralNetConfiguration\nimport org.deeplearning4j.nn.conf.Updater\nimport org.deeplearning4j.nn.conf.layers.DenseLayer\nimport org.deeplearning4j.nn.conf.layers.OutputLayer\nimport org.deeplearning4j.nn.weights.WeightInit\nimport org.deeplearning4j.spark.api.TrainingMaster\nimport org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer\nimport org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster\nimport org.nd4j.linalg.activations.Activation\nimport org.nd4j.linalg.dataset.DataSet\nimport org.nd4j.linalg.dataset.api.iterator.DataSetIterator\nimport org.nd4j.linalg.lossfunctions.LossFunctions\nimport org.slf4j.Logger\nimport org.slf4j.LoggerFactory\n"}]},"apps":[],"jobName":"paragraph_1565664744513_172168178","id":"20190813-025224_246974578","dateCreated":"2019-08-13T02:52:24+0000","dateStarted":"2019-08-13T02:59:29+0000","dateFinished":"2019-08-13T02:59:32+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:11283"},{"text":"val batchSizePerWorker = 16\nval iterTrain = new MnistDataSetIterator(batchSizePerWorker, true, 12345)\nval iterTest = new MnistDataSetIterator(batchSizePerWorker, true, 12345)","user":"anonymous","dateUpdated":"2019-08-13T03:00:29+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"batchSizePerWorker: Int = 16\niterTrain: org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator = org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator@346c3c67\niterTest: org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator = org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator@21ff62c6\n"}]},"apps":[],"jobName":"paragraph_1565664867610_-843584242","id":"20190813-025427_1205670123","dateCreated":"2019-08-13T02:54:27+0000","dateStarted":"2019-08-13T03:00:29+0000","dateFinished":"2019-08-13T03:00:30+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:11284"},{"text":"import scala.collection.mutable.ListBuffer\nvar trainDataList = new ListBuffer[DataSet]()\nwhile (iterTrain.hasNext()) {\n  trainDataList += iterTrain.next()\n}","user":"anonymous","dateUpdated":"2019-08-13T03:06:16+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import scala.collection.mutable.ListBuffer\ntrainDataList: scala.collection.mutable.ListBuffer[org.nd4j.linalg.dataset.DataSet] = ListBuffer()\n"}]},"apps":[],"jobName":"paragraph_1565665229149_1143396995","id":"20190813-030029_1121281114","dateCreated":"2019-08-13T03:00:29+0000","dateStarted":"2019-08-13T03:06:16+0000","dateFinished":"2019-08-13T03:06:21+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:11285"},{"text":"val testDataList = new ListBuffer[DataSet]()\nwhile (iterTest.hasNext()) {\n  testDataList += iterTest.next()\n}","user":"anonymous","dateUpdated":"2019-08-13T03:07:26+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"testDataList: scala.collection.mutable.ListBuffer[org.nd4j.linalg.dataset.DataSet] = ListBuffer()\n"}]},"apps":[],"jobName":"paragraph_1565665554387_263130383","id":"20190813-030554_839253834","dateCreated":"2019-08-13T03:05:54+0000","dateStarted":"2019-08-13T03:07:26+0000","dateFinished":"2019-08-13T03:07:27+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:11286"},{"text":"val trainData = sc.parallelize(trainDataList)\nval testData = sc.parallelize(testDataList)","user":"anonymous","dateUpdated":"2019-08-13T03:07:59+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"trainData: org.apache.spark.rdd.RDD[org.nd4j.linalg.dataset.DataSet] = ParallelCollectionRDD[0] at parallelize at <console>:69\ntestData: org.apache.spark.rdd.RDD[org.nd4j.linalg.dataset.DataSet] = ParallelCollectionRDD[1] at parallelize at <console>:69\n"}]},"apps":[],"jobName":"paragraph_1565665646375_-414088978","id":"20190813-030726_2140426502","dateCreated":"2019-08-13T03:07:26+0000","dateStarted":"2019-08-13T03:07:59+0000","dateFinished":"2019-08-13T03:08:00+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:11287"},{"text":"val conf = new NeuralNetConfiguration.Builder()\n    .seed(12345)\n    .optimizationAlgo(OptimizationAlgorithm.STOCHASTIC_GRADIENT_DESCENT).iterations(1)\n    .activation(Activation.LEAKYRELU)\n    .weightInit(WeightInit.XAVIER)\n    .learningRate(0.02)\n    .updater(Updater.NESTEROVS).momentum(0.9)\n    .regularization(true).l2(1e-4)\n    .list()\n    .layer(0, new DenseLayer.Builder().nIn(28 * 28).nOut(500).build())\n    .layer(1, new DenseLayer.Builder().nIn(500).nOut(100).build())\n    .layer(2, new OutputLayer.Builder(LossFunctions.LossFunction.NEGATIVELOGLIKELIHOOD)\n      .activation(Activation.SOFTMAX).nIn(100).nOut(10).build())\n    .pretrain(false).backprop(true)\n    .build()","user":"anonymous","dateUpdated":"2019-08-13T03:08:34+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"warning: there was one deprecation warning; re-run with -deprecation for details\nconf: org.deeplearning4j.nn.conf.MultiLayerConfiguration =\n{\n  \"backprop\" : true,\n  \"backpropType\" : \"Standard\",\n  \"cacheMode\" : \"NONE\",\n  \"confs\" : [ {\n    \"cacheMode\" : \"NONE\",\n    \"iterationCount\" : 0,\n    \"l1ByParam\" : { },\n    \"l2ByParam\" : { },\n    \"layer\" : {\n      \"dense\" : {\n        \"activationFn\" : {\n          \"LReLU\" : {\n            \"alpha\" : 0.01\n          }\n        },\n        \"adamMeanDecay\" : \"NaN\",\n        \"adamVarDecay\" : \"NaN\",\n        \"biasInit\" : 0.0,\n        \"biasLearningRate\" : 0.02,\n        \"dist\" : null,\n        \"dropOut\" : 0.0,\n        \"epsilon\" : \"NaN\",\n        \"gradientNormalization\" : \"None\",\n        \"gradientNormalizationThreshold\" : 1.0,\n        \"iupdater\" : {\n          \"@class\" : \"org.nd4j.linalg.learning.config.Nesterovs\",\n          \"learningRate\" : 0.02,\n..."}]},"apps":[],"jobName":"paragraph_1565665679160_-1242206529","id":"20190813-030759_1090262478","dateCreated":"2019-08-13T03:07:59+0000","dateStarted":"2019-08-13T03:08:34+0000","dateFinished":"2019-08-13T03:08:51+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:11288"},{"text":"val batchSizePerWorker = 16\n\n  val tm = new ParameterAveragingTrainingMaster.Builder(batchSizePerWorker)    //Each DataSet object: contains (by default) 32 examples\n    .averagingFrequency(5)\n    .workerPrefetchNumBatches(2)            //Async prefetching: 2 examples per worker\n    .batchSizePerWorker(batchSizePerWorker)\n    .build()","user":"anonymous","dateUpdated":"2019-08-13T03:09:44+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"batchSizePerWorker: Int = 16\ntm: org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster = ParameterAveragingTrainingMaster(saveUpdater=false, numWorkers=null, rddDataSetNumExamples=16, averagingFrequency=5, aggregationDepth=2, prefetchNumBatches=2, iterationCount=0, trainingHookList=null)\n"}]},"apps":[],"jobName":"paragraph_1565665714180_-897410217","id":"20190813-030834_1427720787","dateCreated":"2019-08-13T03:08:34+0000","dateStarted":"2019-08-13T03:09:44+0000","dateFinished":"2019-08-13T03:09:45+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:11289"},{"text":"val sparkNet = new SparkDl4jMultiLayer(sc, conf, tm)","user":"anonymous","dateUpdated":"2019-08-13T03:10:37+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"sparkNet: org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer = org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer@16d88ae1\n"}]},"apps":[],"jobName":"paragraph_1565665784744_60522599","id":"20190813-030944_135425041","dateCreated":"2019-08-13T03:09:44+0000","dateStarted":"2019-08-13T03:10:37+0000","dateFinished":"2019-08-13T03:10:37+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:11290"},{"text":"val numEpochs = 15\nfor (i <- 0 to numEpochs) {\n  sparkNet.fit(trainData)\n  println(\"Completed Epoch {}\", i)\n}","user":"anonymous","dateUpdated":"2019-08-13T03:14:16+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"numEpochs: Int = 15\n(Completed Epoch {},0)\n(Completed Epoch {},1)\n(Completed Epoch {},2)\n(Completed Epoch {},3)\n(Completed Epoch {},4)\n(Completed Epoch {},5)\n(Completed Epoch {},6)\n(Completed Epoch {},7)\n(Completed Epoch {},8)\n(Completed Epoch {},9)\n(Completed Epoch {},10)\n(Completed Epoch {},11)\n(Completed Epoch {},12)\n(Completed Epoch {},13)\n(Completed Epoch {},14)\n(Completed Epoch {},15)\n"}]},"apps":[],"jobName":"paragraph_1565665837018_2047209388","id":"20190813-031037_2069446489","dateCreated":"2019-08-13T03:10:37+0000","dateStarted":"2019-08-13T03:14:16+0000","dateFinished":"2019-08-13T03:47:19+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:11291"},{"text":"val evaluation = sparkNet.evaluate(testData)\nprintln(\"***** Evaluation *****\")\nprintln(evaluation.stats())\nevaluation.recall()","user":"anonymous","dateUpdated":"2019-08-13T03:51:46+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"evaluation: org.deeplearning4j.eval.Evaluation =\n\n\n\n==========================Scores========================================\n # of classes:    0\n Accuracy:        0.0000\n Precision:       NaN\n Recall:          NaN\n F1 Score:        NaN\n========================================================================\n***** Evaluation *****\n\n\n\n==========================Scores========================================\n # of classes:    0\n Accuracy:        0.0000\n Precision:       NaN\n Recall:          NaN\n F1 Score:        NaN\n========================================================================\nres9: Double = NaN\n"}]},"apps":[],"jobName":"paragraph_1565665921666_-1742042967","id":"20190813-031201_487138266","dateCreated":"2019-08-13T03:12:01+0000","dateStarted":"2019-08-13T03:51:46+0000","dateFinished":"2019-08-13T03:52:26+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:11292"},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1565668061412_560264097","id":"20190813-034741_1058031918","dateCreated":"2019-08-13T03:47:41+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:11293"}],"name":"spark2","id":"2EK35VSGS","angularObjects":{"2EMQQ3DX6:shared_process":[],"2EHZSSYUS:shared_process":[],"2EK3YX8R3:shared_process":[],"2EJEVQW3R:shared_process":[],"2EH28NVMD:shared_process":[],"2EJN5VJRQ:shared_process":[],"2EJW148VQ:shared_process":[],"2EK1MGQEG:shared_process":[],"2EKRX39FS:shared_process":[],"2EKMNY63R:shared_process":[],"2EHVDSMS9:shared_process":[],"2EKD827GT:shared_process":[],"2EM9C7PGB:shared_process":[],"2EKZ72CJP:shared_process":[],"2EHSEYXD7:shared_process":[],"2EJVP8NPH:shared_process":[],"2EJS2DMAD:shared_process":[],"2EH8D4GW1:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}
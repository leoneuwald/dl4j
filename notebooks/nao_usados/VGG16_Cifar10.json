{"paragraphs":[{"text":"%spark.dep\nz.reset()\nz.load(\"org.nd4j:nd4j-native-platform:0.9.1\")\nz.load(\"org.deeplearning4j:deeplearning4j-core:0.9.1\")\nz.load(\"org.datavec:datavec-spark_2.11:0.9.1_spark_2\")\nz.load(\"org.deeplearning4j:dl4j-spark_2.11:0.9.1_spark_2\")\nz.load(\"org.deeplearning4j:deeplearning4j-zoo:0.9.1\")","dateUpdated":"2019-09-01T03:13:31+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"res1: org.apache.zeppelin.dep.Dependency = org.apache.zeppelin.dep.Dependency@114cbfaa\n"}]},"apps":[],"jobName":"paragraph_1567307514577_-2120039206","id":"20190813-010616_2021083357","dateCreated":"2019-09-01T03:11:54+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:8855","user":"anonymous","dateFinished":"2019-09-01T03:13:33+0000","dateStarted":"2019-09-01T03:13:32+0000"},{"text":"import scala.collection.JavaConversions._\n\nimport org.deeplearning4j.datasets.iterator._\nimport org.deeplearning4j.datasets.iterator.impl._\nimport org.apache.spark.SparkConf\nimport scala.collection.mutable.ListBuffer\nimport org.apache.spark.api.java.JavaRDD\nimport org.apache.spark.api.java.JavaSparkContext\nimport org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator\nimport org.deeplearning4j.eval.Evaluation\nimport org.deeplearning4j.spark.api.TrainingMaster\nimport org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer\nimport org.deeplearning4j.spark.impl.graph.SparkComputationGraph\nimport org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster\nimport org.nd4j.linalg.dataset.DataSet\nimport org.datavec.image.loader.CifarLoader\nimport org.deeplearning4j.datasets.iterator.impl.CifarDataSetIterator\n\n","dateUpdated":"2019-09-01T03:13:38+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import scala.collection.JavaConversions._\nimport org.deeplearning4j.datasets.iterator._\nimport org.deeplearning4j.datasets.iterator.impl._\nimport org.apache.spark.SparkConf\nimport scala.collection.mutable.ListBuffer\nimport org.apache.spark.api.java.JavaRDD\nimport org.apache.spark.api.java.JavaSparkContext\nimport org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator\nimport org.deeplearning4j.eval.Evaluation\nimport org.deeplearning4j.spark.api.TrainingMaster\nimport org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer\nimport org.deeplearning4j.spark.impl.graph.SparkComputationGraph\nimport org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster\nimport org.nd4j.linalg.dataset.DataSet\nimport org.datavec.image.loader.CifarLoader\nimport org.deeplearning4j.datasets.iterator.impl.CifarDataSetIterator\n"}]},"apps":[],"jobName":"paragraph_1567307514578_-2118884959","id":"20190813-010626_1430679682","dateCreated":"2019-09-01T03:11:54+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:8856","user":"anonymous","dateFinished":"2019-09-01T03:13:53+0000","dateStarted":"2019-09-01T03:13:38+0000"},{"text":"val numberOfLabels = CifarLoader.NUM_LABELS\nval numberOfSamples = CifarLoader.NUM_TRAIN_IMAGES\nval numberOfTestSamples = CifarLoader.NUM_TEST_IMAGES\nval batchSizePerWorker = 16","dateUpdated":"2019-09-01T03:20:11+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"numberOfLabels: Int = 10\nnumberOfSamples: Int = 50000\nnumberOfTestSamples: Int = 10000\nbatchSizePerWorker: Int = 16\n"}]},"apps":[],"jobName":"paragraph_1567307514578_-2118884959","id":"20190828-044726_487790819","dateCreated":"2019-09-01T03:11:54+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:8857","user":"anonymous","dateFinished":"2019-09-01T03:20:12+0000","dateStarted":"2019-09-01T03:20:11+0000"},{"text":"import org.datavec.image.loader.BaseImageLoader\nimport collection.JavaConverters._\nimport java.io.File\n\nval states = Map(\"filesFilename\" -> \"cifar-10-binary.tar.gz\", \"filesURL\" -> \"https://storage.googleapis.com/ufrgsneuwald/~kriz/cifar-10-binary.tar.gz\", \"filesFilenameUnzipped\" -> \"cifar-10-batches-bin\")\n\nnew File(new File(System.getProperty(\"user.home\")), \"cifar\")\nstates\nBaseImageLoader.downloadAndUntar(states, new File(new File(System.getProperty(\"user.home\")), \"cifar\"))","dateUpdated":"2019-09-01T03:20:15+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import org.datavec.image.loader.BaseImageLoader\nimport collection.JavaConverters._\nimport java.io.File\nstates: scala.collection.immutable.Map[String,String] = Map(filesFilename -> cifar-10-binary.tar.gz, filesURL -> https://storage.googleapis.com/ufrgsneuwald/~kriz/cifar-10-binary.tar.gz, filesFilenameUnzipped -> cifar-10-batches-bin)\nres3: java.io.File = /var/lib/zeppelin/cifar\nres4: scala.collection.immutable.Map[String,String] = Map(filesFilename -> cifar-10-binary.tar.gz, filesURL -> https://storage.googleapis.com/ufrgsneuwald/~kriz/cifar-10-binary.tar.gz, filesFilenameUnzipped -> cifar-10-batches-bin)\n"}]},"apps":[],"jobName":"paragraph_1567307514578_-2118884959","id":"20190828-053243_1540319826","dateCreated":"2019-09-01T03:11:54+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:8858","user":"anonymous","dateFinished":"2019-09-01T03:20:23+0000","dateStarted":"2019-09-01T03:20:15+0000"},{"text":"val trainingDataSet = new CifarDataSetIterator(batchSizePerWorker, numberOfSamples, true)\nval testDataSet = new CifarDataSetIterator(batchSizePerWorker, numberOfTestSamples, false)\nimport scala.collection.mutable.ListBuffer\n\nvar trainDataList = new ListBuffer[DataSet]()\nwhile (trainingDataSet.hasNext()) {\n  trainDataList += trainingDataSet.next()\n}\n\nval testDataList = new ListBuffer[DataSet]()\nwhile (testDataSet.hasNext()) {\n  testDataList += testDataSet.next()\n}\nval trainData = sc.parallelize(trainDataList)\nval testData = sc.parallelize(testDataList)","dateUpdated":"2019-09-01T03:20:20+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"trainingDataSet: org.deeplearning4j.datasets.iterator.impl.CifarDataSetIterator = org.deeplearning4j.datasets.iterator.impl.CifarDataSetIterator@5f3531cf\ntestDataSet: org.deeplearning4j.datasets.iterator.impl.CifarDataSetIterator = org.deeplearning4j.datasets.iterator.impl.CifarDataSetIterator@6972d073\nimport scala.collection.mutable.ListBuffer\ntrainDataList: scala.collection.mutable.ListBuffer[org.nd4j.linalg.dataset.DataSet] = ListBuffer()\ntestDataList: scala.collection.mutable.ListBuffer[org.nd4j.linalg.dataset.DataSet] = ListBuffer()\ntrainData: org.apache.spark.rdd.RDD[org.nd4j.linalg.dataset.DataSet] = ParallelCollectionRDD[0] at parallelize at <console>:57\ntestData: org.apache.spark.rdd.RDD[org.nd4j.linalg.dataset.DataSet] = ParallelCollectionRDD[1] at parallelize at <console>:57\n"}]},"apps":[],"jobName":"paragraph_1567307514578_-2118884959","id":"20190828-044805_1310907596","dateCreated":"2019-09-01T03:11:54+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:8859","user":"anonymous","dateFinished":"2019-09-01T03:20:40+0000","dateStarted":"2019-09-01T03:20:20+0000"},{"text":"import org.deeplearning4j.zoo.model.VGG16\nval seed = 1234 // integer for reproducability of a random number generator\n\nval zooModel = new VGG16(numberOfLabels, seed, 3)","dateUpdated":"2019-09-01T03:20:46+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import org.deeplearning4j.zoo.model.VGG16\nseed: Int = 1234\nzooModel: org.deeplearning4j.zoo.model.VGG16 = org.deeplearning4j.zoo.model.VGG16@79c18f81\n"}]},"apps":[],"jobName":"paragraph_1567307514579_-2119269708","id":"20190813-014219_2027485131","dateCreated":"2019-09-01T03:11:54+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:8860","user":"anonymous","dateFinished":"2019-09-01T03:20:47+0000","dateStarted":"2019-09-01T03:20:46+0000"},{"text":"import collection.JavaConverters._\nzooModel.setInputShape(Array(Array(3, 32, 32)))","dateUpdated":"2019-09-01T03:20:49+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import collection.JavaConverters._\n"}]},"apps":[],"jobName":"paragraph_1567307514579_-2119269708","id":"20190828-024936_683229252","dateCreated":"2019-09-01T03:11:54+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:8861","user":"anonymous","dateFinished":"2019-09-01T03:20:50+0000","dateStarted":"2019-09-01T03:20:49+0000"},{"text":"val tm = new ParameterAveragingTrainingMaster.Builder(batchSizePerWorker)    //Each DataSet object: contains (by default) 32 examples\n  .workerPrefetchNumBatches(0)\n  .saveUpdater(true)\n  .averagingFrequency(5)                            //Do 5 minibatch fit operations per worker, then average and redistribute parameters\n  .batchSizePerWorker(batchSizePerWorker)     //Number of examples that each worker uses per fit operation\n  .build()\n  \nval sparkNet = new SparkDl4jMultiLayer(sc, zooModel.conf(), tm)","dateUpdated":"2019-09-01T03:20:57+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"tm: org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster = ParameterAveragingTrainingMaster(saveUpdater=true, numWorkers=null, rddDataSetNumExamples=16, averagingFrequency=5, aggregationDepth=2, prefetchNumBatches=0, iterationCount=0, trainingHookList=null)\nsparkNet: org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer = org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer@4644f87a\n"}]},"apps":[],"jobName":"paragraph_1567307514579_-2119269708","id":"20190819-011525_331240530","dateCreated":"2019-09-01T03:11:54+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:8862","user":"anonymous","dateFinished":"2019-09-01T03:21:09+0000","dateStarted":"2019-09-01T03:20:57+0000"},{"text":"val numEpochs = 2\nfor (i <- 0 to numEpochs) {\n  println(i)\n  val trained = sparkNet.fit(trainData)\n}","dateUpdated":"2019-09-01T03:21:13+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"msg":[{"data":"","type":"TEXT"}]},"apps":[],"jobName":"paragraph_1567307514580_-2121193453","id":"20190813-015330_1330142053","dateCreated":"2019-09-01T03:11:54+0000","status":"RUNNING","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:8863","user":"anonymous","dateStarted":"2019-09-01T03:21:13+0000"},{"text":"val resultado = sparkNet.doEvaluation(testData, 64, new Evaluation(10))(0)","dateUpdated":"2019-09-01T03:11:54+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1567307514580_-2121193453","id":"20190813-021401_2110373941","dateCreated":"2019-09-01T03:11:54+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:8864"},{"text":"println(resultado)","dateUpdated":"2019-09-01T03:11:54+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"<console>:101: error: not found: value resultado\n       println(resultado)\n               ^\n"}]},"apps":[],"jobName":"paragraph_1567307514580_-2121193453","id":"20190828-032002_1964617380","dateCreated":"2019-09-01T03:11:54+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:8865"},{"dateUpdated":"2019-09-01T03:11:54+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1567307514581_-2121578202","id":"20190828-032119_912714771","dateCreated":"2019-09-01T03:11:54+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:8866"}],"name":"VGG16_Cifar10","id":"2EPK49MKB","angularObjects":{"2EMFDCFCW:shared_process":[],"2ENRPW8TC:shared_process":[],"2ENRWMA4R:shared_process":[],"2EKQBPN6H:shared_process":[],"2ENSKNF5C:shared_process":[],"2EPEVTCTY:shared_process":[],"2EMQ86TJ6:shared_process":[],"2EKCKG4BC:shared_process":[],"2EMT1DUEK:shared_process":[],"2EN2SE7WN:shared_process":[],"2ENUXCTA1:shared_process":[],"2EKY83YA6:shared_process":[],"2EMZKCCVT:shared_process":[],"2EKCDUCE3:shared_process":[],"2EKGPUJ3Q:shared_process":[],"2EJTVD9M2:shared_process":[],"2EJWTTNTH:shared_process":[],"2EPD2QVC7:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}
{"paragraphs":[{"text":"%spark.dep\nz.reset()\nz.load(\"org.nd4j:nd4j-native-platform:0.9.1\")\nz.load(\"org.deeplearning4j:deeplearning4j-core:0.9.1\")\nz.load(\"org.datavec:datavec-spark_2.11:0.9.1_spark_2\")\nz.load(\"org.deeplearning4j:dl4j-spark_2.11:0.9.1_spark_2\")\nz.load(\"org.deeplearning4j:deeplearning4j-zoo:0.9.1\")","dateUpdated":"2019-08-28T02:31:56+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"res0: org.apache.zeppelin.dep.Dependency = org.apache.zeppelin.dep.Dependency@7304229\n"}]},"apps":[],"jobName":"paragraph_1566958955952_-1900220849","id":"20190813-010616_2021083357","dateCreated":"2019-08-28T02:22:35+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:3468","user":"anonymous","dateFinished":"2019-08-28T02:32:05+0000","dateStarted":"2019-08-28T02:31:56+0000"},{"text":"import scala.collection.JavaConversions._\n\nimport org.deeplearning4j.datasets.iterator._\nimport org.deeplearning4j.datasets.iterator.impl._\nimport org.deeplearning4j.nn.api._\nimport org.deeplearning4j.nn.multilayer._\nimport org.deeplearning4j.nn.graph._\nimport org.deeplearning4j.nn.conf._\nimport org.deeplearning4j.nn.conf.inputs._\nimport org.deeplearning4j.nn.conf.layers._\nimport org.deeplearning4j.nn.weights._\nimport org.deeplearning4j.spark.api.TrainingMaster\nimport org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer\nimport org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster\nimport org.deeplearning4j.optimize.listeners._\nimport org.deeplearning4j.datasets.datavec.RecordReaderMultiDataSetIterator\nimport org.deeplearning4j.eval.Evaluation\nimport org.deeplearning4j.zoo.model.LeNet\n\nimport org.nd4j.linalg.learning.config._ // for different updaters like Adam, Nesterovs, etc.\nimport org.nd4j.linalg.activations.Activation // defines different activation functions like RELU, SOFTMAX, etc.\nimport org.nd4j.linalg.lossfunctions.LossFunctions // mean squared error, multiclass cross entropy, etc.\n\nimport org.apache.spark.SparkConf\nimport org.apache.spark.api.java.JavaRDD\nimport org.apache.spark.api.java.JavaSparkContext\nimport org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator\nimport org.deeplearning4j.eval.Evaluation\nimport org.deeplearning4j.nn.api.OptimizationAlgorithm\nimport org.deeplearning4j.nn.conf.MultiLayerConfiguration\nimport org.deeplearning4j.nn.conf.NeuralNetConfiguration\nimport org.deeplearning4j.nn.conf.Updater\nimport org.deeplearning4j.nn.conf.layers.DenseLayer\nimport org.deeplearning4j.nn.conf.layers.OutputLayer\nimport org.deeplearning4j.nn.weights.WeightInit\nimport org.deeplearning4j.spark.api.TrainingMaster\nimport org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer\nimport org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster\nimport org.nd4j.linalg.activations.Activation\nimport org.nd4j.linalg.dataset.DataSet\nimport org.nd4j.linalg.dataset.api.iterator.DataSetIterator\nimport org.nd4j.linalg.lossfunctions.LossFunctions","dateUpdated":"2019-08-28T02:31:59+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import scala.collection.JavaConversions._\nimport org.deeplearning4j.datasets.iterator._\nimport org.deeplearning4j.datasets.iterator.impl._\nimport org.deeplearning4j.nn.api._\nimport org.deeplearning4j.nn.multilayer._\nimport org.deeplearning4j.nn.graph._\nimport org.deeplearning4j.nn.conf._\nimport org.deeplearning4j.nn.conf.inputs._\nimport org.deeplearning4j.nn.conf.layers._\nimport org.deeplearning4j.nn.weights._\nimport org.deeplearning4j.spark.api.TrainingMaster\nimport org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer\nimport org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster\nimport org.deeplearning4j.optimize.listeners._\nimport org.deeplearning4j.datasets.datavec.RecordReaderMultiDataSetIterator\nimport org.deeplearning4j.eval.Evaluation\nimport org.deeplearning4j.zoo.model.LeNet\nimport org.nd4j.linalg.learning.config._\nimport org.nd4j.linalg.activations.Activation\nimport org.nd4j.linalg.lossfunctions.LossFunctions\nimport org.apache.spark.SparkConf\nimport org.apache.spark.api.java.JavaRDD\nimport org.apache.spark.api.java.JavaSparkContext\nimport org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator\nimport org.deeplearning4j.eval.Evaluation\nimport org.deeplearning4j.nn.api.OptimizationAlgorithm\nimport org.deeplearning4j.nn.conf.MultiLayerConfiguration\nimport org.deeplearning4j.nn.conf.NeuralNetConfiguration\nimport org.deeplearning4j.nn.conf.Updater\nimport org.deeplearning4j.nn.conf.layers.DenseLayer\nimport org.deeplearning4j.nn.conf.layers.OutputLayer\nimport org.deeplearning4j.nn.weights.WeightInit\nimport org.deeplearning4j.spark.api.TrainingMaster\nimport org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer\nimport org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster\nimport org.nd4j.linalg.activations.Activation\nimport org.nd4j.linalg.dataset.DataSet\nimport org.nd4j.linalg.dataset.api.iterator.DataSetIterator\nimport org.nd4j.linalg.lossfunctions.LossFunctions\n"}]},"apps":[],"jobName":"paragraph_1566958955952_-1900220849","id":"20190813-010626_1430679682","dateCreated":"2019-08-28T02:22:35+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:3469","user":"anonymous","dateFinished":"2019-08-28T02:32:31+0000","dateStarted":"2019-08-28T02:31:59+0000"},{"text":"val batchSizePerWorker = 16\nval iterTrain = new MnistDataSetIterator(batchSizePerWorker, true, 12345)\nval iterTest = new MnistDataSetIterator(batchSizePerWorker, false, 12345)\n\nimport scala.collection.mutable.ListBuffer\nvar trainDataList = new ListBuffer[DataSet]()\nwhile (iterTrain.hasNext()) {\n  trainDataList += iterTrain.next()\n}\n\nval testDataList = new ListBuffer[DataSet]()\nwhile (iterTest.hasNext()) {\n  testDataList += iterTest.next()\n}\n\nval trainData = sc.parallelize(trainDataList)\nval testData = sc.parallelize(testDataList)","dateUpdated":"2019-08-28T02:42:38+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"batchSizePerWorker: Int = 16\niterTrain: org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator = org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator@5c24c1f6\niterTest: org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator = org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator@11f62e60\nimport scala.collection.mutable.ListBuffer\ntrainDataList: scala.collection.mutable.ListBuffer[org.nd4j.linalg.dataset.DataSet] = ListBuffer()\ntestDataList: scala.collection.mutable.ListBuffer[org.nd4j.linalg.dataset.DataSet] = ListBuffer()\ntrainData: org.apache.spark.rdd.RDD[org.nd4j.linalg.dataset.DataSet] = ParallelCollectionRDD[0] at parallelize at <console>:94\ntestData: org.apache.spark.rdd.RDD[org.nd4j.linalg.dataset.DataSet] = ParallelCollectionRDD[1] at parallelize at <console>:93\n"}]},"apps":[],"jobName":"paragraph_1566958955953_-1900605598","id":"20190813-013450_461185789","dateCreated":"2019-08-28T02:22:35+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:3470","user":"anonymous","dateFinished":"2019-08-28T02:32:38+0000","dateStarted":"2019-08-28T02:32:06+0000"},{"text":"//val classesNum = MnistDataSetIterator.numLabels(emnistSet) // total output classes\nval seed = 123 // integer for reproducability of a random number generator\n\nval zooModel = new LeNet(10, seed, 3)\nzooModel.setInputShape()\n//Model net = zooModel.init();\n","dateUpdated":"2019-08-28T02:46:00+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"seed: Int = 123\nzooModel: org.deeplearning4j.zoo.model.LeNet = org.deeplearning4j.zoo.model.LeNet@39442bc1\n"}]},"apps":[],"jobName":"paragraph_1566958955953_-1900605598","id":"20190813-014219_2027485131","dateCreated":"2019-08-28T02:22:35+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:3471","user":"anonymous","dateFinished":"2019-08-28T02:33:02+0000","dateStarted":"2019-08-28T02:33:02+0000"},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1566960576541_1349681946","id":"20190828-024936_683229252","dateCreated":"2019-08-28T02:49:36+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:4602","text":"import collection.JavaConverters._\nzooModel.setInputShape(Array(Array(1, 28, 28)))","dateUpdated":"2019-08-28T02:59:04+0000","dateFinished":"2019-08-28T02:59:06+0000","dateStarted":"2019-08-28T02:59:04+0000","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import collection.JavaConverters._\n"}]}},{"text":"//zooModel.init()\n//zooModel.conf()","dateUpdated":"2019-08-28T02:22:35+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1566958955954_-1899451351","id":"20190819-011428_2087551091","dateCreated":"2019-08-28T02:22:35+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:3472"},{"text":"val tm = new ParameterAveragingTrainingMaster.Builder(batchSizePerWorker)    //Each DataSet object: contains (by default) 32 examples\n  .workerPrefetchNumBatches(0)\n  .saveUpdater(true)\n  .averagingFrequency(5)                            //Do 5 minibatch fit operations per worker, then average and redistribute parameters\n  .batchSizePerWorker(batchSizePerWorker)     //Number of examples that each worker uses per fit operation\n  .build()\n  \nval sparkNet = new SparkDl4jMultiLayer(sc, zooModel.conf(), tm)","dateUpdated":"2019-08-28T02:59:07+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"tm: org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster = ParameterAveragingTrainingMaster(saveUpdater=true, numWorkers=null, rddDataSetNumExamples=16, averagingFrequency=5, aggregationDepth=2, prefetchNumBatches=0, iterationCount=0, trainingHookList=null)\nsparkNet: org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer = org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer@61135ce7\n"}]},"apps":[],"jobName":"paragraph_1566958955954_-1899451351","id":"20190819-011525_331240530","dateCreated":"2019-08-28T02:22:35+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:3473","user":"anonymous","dateFinished":"2019-08-28T02:59:08+0000","dateStarted":"2019-08-28T02:59:07+0000"},{"text":"val trained = sparkNet.fit(trainData)","dateUpdated":"2019-08-28T02:59:12+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"trained: org.deeplearning4j.nn.multilayer.MultiLayerNetwork = org.deeplearning4j.nn.multilayer.MultiLayerNetwork@137ea757\n"}]},"apps":[],"jobName":"paragraph_1566958955955_-1899836100","id":"20190813-015330_1330142053","dateCreated":"2019-08-28T02:22:35+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:3477","user":"anonymous","dateFinished":"2019-08-28T03:18:47+0000","dateStarted":"2019-08-28T02:59:12+0000"},{"dateUpdated":"2019-08-28T03:20:02+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1566958955955_-1899836100","id":"20190813-021401_2110373941","dateCreated":"2019-08-28T02:22:35+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:3478","text":"val resultado = sparkNet.doEvaluation(testData, 64, new Evaluation(10))(0)","user":"anonymous","dateFinished":"2019-08-28T03:20:51+0000","dateStarted":"2019-08-28T03:20:02+0000","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"resultado: org.deeplearning4j.eval.Evaluation =\n\nExamples labeled as 0 classified by model as 0: 5868 times\nExamples labeled as 0 classified by model as 1: 1 times\nExamples labeled as 0 classified by model as 2: 8 times\nExamples labeled as 0 classified by model as 3: 2 times\nExamples labeled as 0 classified by model as 4: 2 times\nExamples labeled as 0 classified by model as 5: 8 times\nExamples labeled as 0 classified by model as 6: 14 times\nExamples labeled as 0 classified by model as 7: 1 times\nExamples labeled as 0 classified by model as 8: 7 times\nExamples labeled as 0 classified by model as 9: 12 times\nExamples labeled as 1 classified by model as 0: 1 times\nExamples labeled as 1 classified by model as 1: 6588 times\nExamples labeled as 1 classified by model as 2: 49 times\nExamples la..."}]}},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1566962402080_1382017823","id":"20190828-032002_1964617380","dateCreated":"2019-08-28T03:20:02+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:5656","text":"println(resultado)","dateUpdated":"2019-08-28T03:21:19+0000","dateFinished":"2019-08-28T03:21:19+0000","dateStarted":"2019-08-28T03:21:19+0000","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nExamples labeled as 0 classified by model as 0: 5868 times\nExamples labeled as 0 classified by model as 1: 1 times\nExamples labeled as 0 classified by model as 2: 8 times\nExamples labeled as 0 classified by model as 3: 2 times\nExamples labeled as 0 classified by model as 4: 2 times\nExamples labeled as 0 classified by model as 5: 8 times\nExamples labeled as 0 classified by model as 6: 14 times\nExamples labeled as 0 classified by model as 7: 1 times\nExamples labeled as 0 classified by model as 8: 7 times\nExamples labeled as 0 classified by model as 9: 12 times\nExamples labeled as 1 classified by model as 0: 1 times\nExamples labeled as 1 classified by model as 1: 6588 times\nExamples labeled as 1 classified by model as 2: 49 times\nExamples labeled as 1 classified by model as 3: 15 times\nExamples labeled as 1 classified by model as 4: 26 times\nExamples labeled as 1 classified by model as 6: 5 times\nExamples labeled as 1 classified by model as 7: 19 times\nExamples labeled as 1 classified by model as 8: 33 times\nExamples labeled as 1 classified by model as 9: 6 times\nExamples labeled as 2 classified by model as 0: 9 times\nExamples labeled as 2 classified by model as 1: 4 times\nExamples labeled as 2 classified by model as 2: 5835 times\nExamples labeled as 2 classified by model as 3: 24 times\nExamples labeled as 2 classified by model as 4: 7 times\nExamples labeled as 2 classified by model as 6: 2 times\nExamples labeled as 2 classified by model as 7: 34 times\nExamples labeled as 2 classified by model as 8: 30 times\nExamples labeled as 2 classified by model as 9: 13 times\nExamples labeled as 3 classified by model as 0: 6 times\nExamples labeled as 3 classified by model as 1: 1 times\nExamples labeled as 3 classified by model as 2: 28 times\nExamples labeled as 3 classified by model as 3: 5985 times\nExamples labeled as 3 classified by model as 4: 1 times\nExamples labeled as 3 classified by model as 5: 35 times\nExamples labeled as 3 classified by model as 7: 17 times\nExamples labeled as 3 classified by model as 8: 22 times\nExamples labeled as 3 classified by model as 9: 36 times\nExamples labeled as 4 classified by model as 0: 2 times\nExamples labeled as 4 classified by model as 1: 3 times\nExamples labeled as 4 classified by model as 2: 8 times\nExamples labeled as 4 classified by model as 4: 5733 times\nExamples labeled as 4 classified by model as 6: 15 times\nExamples labeled as 4 classified by model as 7: 7 times\nExamples labeled as 4 classified by model as 8: 4 times\nExamples labeled as 4 classified by model as 9: 70 times\nExamples labeled as 5 classified by model as 0: 5 times\nExamples labeled as 5 classified by model as 1: 1 times\nExamples labeled as 5 classified by model as 2: 5 times\nExamples labeled as 5 classified by model as 3: 22 times\nExamples labeled as 5 classified by model as 4: 5 times\nExamples labeled as 5 classified by model as 5: 5331 times\nExamples labeled as 5 classified by model as 6: 14 times\nExamples labeled as 5 classified by model as 7: 4 times\nExamples labeled as 5 classified by model as 8: 14 times\nExamples labeled as 5 classified by model as 9: 20 times\nExamples labeled as 6 classified by model as 0: 12 times\nExamples labeled as 6 classified by model as 1: 5 times\nExamples labeled as 6 classified by model as 3: 1 times\nExamples labeled as 6 classified by model as 4: 6 times\nExamples labeled as 6 classified by model as 5: 26 times\nExamples labeled as 6 classified by model as 6: 5855 times\nExamples labeled as 6 classified by model as 8: 12 times\nExamples labeled as 6 classified by model as 9: 1 times\nExamples labeled as 7 classified by model as 0: 3 times\nExamples labeled as 7 classified by model as 1: 4 times\nExamples labeled as 7 classified by model as 2: 22 times\nExamples labeled as 7 classified by model as 3: 8 times\nExamples labeled as 7 classified by model as 4: 14 times\nExamples labeled as 7 classified by model as 5: 1 times\nExamples labeled as 7 classified by model as 7: 6169 times\nExamples labeled as 7 classified by model as 8: 6 times\nExamples labeled as 7 classified by model as 9: 38 times\nExamples labeled as 8 classified by model as 0: 11 times\nExamples labeled as 8 classified by model as 1: 16 times\nExamples labeled as 8 classified by model as 2: 27 times\nExamples labeled as 8 classified by model as 3: 36 times\nExamples labeled as 8 classified by model as 4: 22 times\nExamples labeled as 8 classified by model as 5: 37 times\nExamples labeled as 8 classified by model as 6: 14 times\nExamples labeled as 8 classified by model as 7: 8 times\nExamples labeled as 8 classified by model as 8: 5617 times\nExamples labeled as 8 classified by model as 9: 63 times\nExamples labeled as 9 classified by model as 0: 6 times\nExamples labeled as 9 classified by model as 1: 2 times\nExamples labeled as 9 classified by model as 3: 25 times\nExamples labeled as 9 classified by model as 4: 19 times\nExamples labeled as 9 classified by model as 5: 14 times\nExamples labeled as 9 classified by model as 6: 2 times\nExamples labeled as 9 classified by model as 7: 42 times\nExamples labeled as 9 classified by model as 8: 5 times\nExamples labeled as 9 classified by model as 9: 5834 times\n\n\n==========================Scores========================================\n # of classes:    10\n Accuracy:        0.9802\n Precision:       0.9801\n Recall:          0.9803\n F1 Score:        0.9802\nPrecision, recall & F1: macro-averaged (equally weighted avg. of 10 classes)\n========================================================================\n"}]}},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1566962479008_-1881514293","id":"20190828-032119_912714771","dateCreated":"2019-08-28T03:21:19+0000","status":"READY","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:5745"}],"name":"LeNet - Mnist","id":"2EMH97N27","angularObjects":{"2ENV62EWF:shared_process":[],"2EKG8BMW9:shared_process":[],"2EMX23C27:shared_process":[],"2EJH2FTMD:shared_process":[],"2EP7UN87V:shared_process":[],"2EMBSWYMU:shared_process":[],"2ENP4TD35:shared_process":[],"2ENF5SMV8:shared_process":[],"2EMUV1P8C:shared_process":[],"2EPB4ZYT2:shared_process":[],"2EMEM8Q8K:shared_process":[],"2EK3TD1YW:shared_process":[],"2EK1T97NR:shared_process":[],"2EK9CM7BC:shared_process":[],"2EP4UXN4H:shared_process":[],"2EP8N35HX:shared_process":[],"2EP5A1E64:shared_process":[],"2EK7BEQZF:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}
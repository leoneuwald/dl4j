{"paragraphs":[{"text":"%spark.dep\nz.reset()\nz.load(\"org.nd4j:nd4j-native-platform:0.9.1\")\nz.load(\"org.deeplearning4j:deeplearning4j-core:0.9.1\")\nz.load(\"org.datavec:datavec-spark_2.11:0.9.1_spark_2\")\nz.load(\"org.deeplearning4j:dl4j-spark_2.11:0.9.1_spark_2\")\nz.load(\"org.deeplearning4j:deeplearning4j-zoo:0.9.1\")","dateUpdated":"2019-09-01T23:36:28+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"res0: org.apache.zeppelin.dep.Dependency = org.apache.zeppelin.dep.Dependency@154267f5\n"}]},"apps":[],"jobName":"paragraph_1567380926238_1859122207","id":"20190813-010616_2021083357","dateCreated":"2019-09-01T23:35:26+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:231","user":"anonymous","dateFinished":"2019-09-01T23:36:50+0000","dateStarted":"2019-09-01T23:36:28+0000"},{"text":"import scala.collection.JavaConversions._\n\nimport org.deeplearning4j.datasets.iterator._\nimport org.deeplearning4j.datasets.iterator.impl._\nimport org.deeplearning4j.spark.api.TrainingMaster\nimport org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer\nimport org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster\nimport org.deeplearning4j.optimize.listeners._\nimport org.deeplearning4j.datasets.datavec.RecordReaderMultiDataSetIterator\nimport org.deeplearning4j.eval.Evaluation\nimport org.deeplearning4j.zoo.model.LeNet\nimport org.apache.spark.SparkConf\nimport org.apache.spark.api.java.JavaRDD\nimport org.apache.spark.api.java.JavaSparkContext\nimport org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator\nimport org.deeplearning4j.eval.Evaluation\nimport org.deeplearning4j.spark.api.TrainingMaster\nimport org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer\nimport org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster\nimport org.nd4j.linalg.activations.Activation\nimport org.nd4j.linalg.dataset.DataSet\nimport org.nd4j.linalg.dataset.api.iterator.DataSetIterator\nimport org.nd4j.linalg.lossfunctions.LossFunctions","dateUpdated":"2019-09-01T23:36:31+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import scala.collection.JavaConversions._\nimport org.deeplearning4j.datasets.iterator._\nimport org.deeplearning4j.datasets.iterator.impl._\nimport org.deeplearning4j.spark.api.TrainingMaster\nimport org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer\nimport org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster\nimport org.deeplearning4j.optimize.listeners._\nimport org.deeplearning4j.datasets.datavec.RecordReaderMultiDataSetIterator\nimport org.deeplearning4j.eval.Evaluation\nimport org.deeplearning4j.zoo.model.LeNet\nimport org.apache.spark.SparkConf\nimport org.apache.spark.api.java.JavaRDD\nimport org.apache.spark.api.java.JavaSparkContext\nimport org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator\nimport org.deeplearning4j.eval.Evaluation\nimport org.deeplearning4j.spark.api.TrainingMaster\nimport org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer\nimport org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster\nimport org.nd4j.linalg.activations.Activation\nimport org.nd4j.linalg.dataset.DataSet\nimport org.nd4j.linalg.dataset.api.iterator.DataSetIterator\nimport org.nd4j.linalg.lossfunctions.LossFunctions\n"}]},"apps":[],"jobName":"paragraph_1567380926243_1844886498","id":"20190813-010626_1430679682","dateCreated":"2019-09-01T23:35:26+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:232","user":"anonymous","dateFinished":"2019-09-01T23:37:08+0000","dateStarted":"2019-09-01T23:36:31+0000"},{"text":"val batchSizePerWorker = 16\nval iterTrain = new MnistDataSetIterator(batchSizePerWorker, true, 12345)\nval iterTest = new MnistDataSetIterator(batchSizePerWorker, false, 12345)\n\nimport scala.collection.mutable.ListBuffer\nvar trainDataList = new ListBuffer[DataSet]()\nwhile (iterTrain.hasNext()) {\n  trainDataList += iterTrain.next()\n}\n\nval testDataList = new ListBuffer[DataSet]()\nwhile (iterTest.hasNext()) {\n  testDataList += iterTest.next()\n}\n\nval trainData = sc.parallelize(trainDataList)\nval testData = sc.parallelize(testDataList)","dateUpdated":"2019-09-01T23:37:21+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"batchSizePerWorker: Int = 16\niterTrain: org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator = org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator@59a8a1e6\niterTest: org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator = org.deeplearning4j.datasets.iterator.impl.MnistDataSetIterator@12048d72\nimport scala.collection.mutable.ListBuffer\ntrainDataList: scala.collection.mutable.ListBuffer[org.nd4j.linalg.dataset.DataSet] = ListBuffer()\ntestDataList: scala.collection.mutable.ListBuffer[org.nd4j.linalg.dataset.DataSet] = ListBuffer()\ntrainData: org.apache.spark.rdd.RDD[org.nd4j.linalg.dataset.DataSet] = ParallelCollectionRDD[0] at parallelize at <console>:61\ntestData: org.apache.spark.rdd.RDD[org.nd4j.linalg.dataset.DataSet] = ParallelCollectionRDD[1] at parallelize at <console>:60\n"}]},"apps":[],"jobName":"paragraph_1567380926244_1842962753","id":"20190813-013450_461185789","dateCreated":"2019-09-01T23:35:26+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:233","user":"anonymous","dateFinished":"2019-09-01T23:37:28+0000","dateStarted":"2019-09-01T23:37:21+0000"},{"text":"val classesNum = 10\nval seed = 123\n\nval zooModel = new LeNet(classesNum, seed, 3)","dateUpdated":"2019-09-01T23:37:51+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"classesNum: Int = 10\nseed: Int = 123\nzooModel: org.deeplearning4j.zoo.model.LeNet = org.deeplearning4j.zoo.model.LeNet@16fecb4\n"}]},"apps":[],"jobName":"paragraph_1567380926244_1842962753","id":"20190813-014219_2027485131","dateCreated":"2019-09-01T23:35:26+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:234","user":"anonymous","dateFinished":"2019-09-01T23:37:52+0000","dateStarted":"2019-09-01T23:37:51+0000"},{"text":"import collection.JavaConverters._\nzooModel.setInputShape(Array(Array(1, 28, 28)))","dateUpdated":"2019-09-01T23:38:02+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import collection.JavaConverters._\n"}]},"apps":[],"jobName":"paragraph_1567380926245_1842578004","id":"20190828-024936_683229252","dateCreated":"2019-09-01T23:35:26+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:235","user":"anonymous","dateFinished":"2019-09-01T23:38:03+0000","dateStarted":"2019-09-01T23:38:02+0000"},{"text":"val tm = new ParameterAveragingTrainingMaster.Builder(batchSizePerWorker)\n  .workerPrefetchNumBatches(0)\n  .saveUpdater(true)\n  .averagingFrequency(5)\n  .batchSizePerWorker(batchSizePerWorker)\n  .build()\n  \nval sparkNet = new SparkDl4jMultiLayer(sc, zooModel.conf(), tm)","dateUpdated":"2019-09-01T23:38:22+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"tm: org.deeplearning4j.spark.impl.paramavg.ParameterAveragingTrainingMaster = ParameterAveragingTrainingMaster(saveUpdater=true, numWorkers=null, rddDataSetNumExamples=16, averagingFrequency=5, aggregationDepth=2, prefetchNumBatches=0, iterationCount=0, trainingHookList=null)\nsparkNet: org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer = org.deeplearning4j.spark.impl.multilayer.SparkDl4jMultiLayer@1e1244b2\n"}]},"apps":[],"jobName":"paragraph_1567380926245_1842578004","id":"20190819-011525_331240530","dateCreated":"2019-09-01T23:35:26+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:237","user":"anonymous","dateFinished":"2019-09-01T23:38:34+0000","dateStarted":"2019-09-01T23:38:22+0000"},{"text":"val numEpochs = 5\nfor (i <- 0 to numEpochs) {\n  println(numEpochs)\n  val trained = sparkNet.fit(trainData)\n}","dateUpdated":"2019-09-01T23:39:56+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"msg":[{"data":"","type":"TEXT"}]},"apps":[],"jobName":"paragraph_1567380926246_1843732251","id":"20190813-015330_1330142053","dateCreated":"2019-09-01T23:35:26+0000","status":"RUNNING","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:238","user":"anonymous","dateStarted":"2019-09-01T23:39:56+0000"},{"text":"val resultado = sparkNet.doEvaluation(testData, 64, new Evaluation(10))(0)\nprintln(resultado)","dateUpdated":"2019-09-01T23:40:16+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1567380926246_1843732251","id":"20190813-021401_2110373941","dateCreated":"2019-09-01T23:35:26+0000","status":"PENDING","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:239","user":"anonymous","dateStarted":"2019-09-01T23:40:16+0000"},{"dateUpdated":"2019-09-01T23:35:26+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1567380926247_1843347502","id":"20190828-032119_912714771","dateCreated":"2019-09-01T23:35:26+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:241"}],"name":"LeNet - Mnist","id":"2EMY75AJE","angularObjects":{"2EM3WKXAM:shared_process":[],"2EMWRQYS7:shared_process":[],"2EKTHJC8T:shared_process":[],"2EMA7BYMF:shared_process":[],"2ENE92MW6:shared_process":[],"2EN5ZQ6WQ:shared_process":[],"2EJWU1N86:shared_process":[],"2EM4A3851:shared_process":[],"2EM259R36:shared_process":[],"2EK3NYJMG:shared_process":[],"2EKY6FKRK:shared_process":[],"2EPPCUETP:shared_process":[],"2EMCCYMJY:shared_process":[],"2EPCG5579:shared_process":[],"2ENJPP7ZA:shared_process":[],"2EMTG9HCH:shared_process":[],"2EP5KXPUR:shared_process":[],"2EMJJNC3G:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}